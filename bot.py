import asyncio
from aiogram import Bot, Dispatcher, types
from aiogram.filters import Command
from aiogram import F
from aiogram.utils.keyboard import ReplyKeyboardBuilder
from func_bot import accounts

# 0 - TikTok
# 1 - Instagram
# 2 - YouTube

AUTHOR = ""
API_TOKEN = "7611179707:AAE7HDYSC_CMywyAYF9YYS8Vk0AIrqkoARI"

bot = Bot(token=API_TOKEN)
dp = Dispatcher()

# –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
isAuthorizated = False
auth_data = {
    "admin" : "admin001"
}


@dp.message(Command("start"))
async def login_handler(message: types.Message):
    await message.reply("–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å. –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º - –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä—É–π—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–º–∞–Ω–¥—ã /auth –ª–æ–≥–∏–Ω –ø–∞—Ä–æ–ª—å!")

@dp.message(Command("auth"))
async def auth_handler(message: types.Message):
    global AUTHOR
    command = message.text.strip().split()
    if len(command) != 3:
        await message.reply("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ: /auth login password")
        return
    _, login, password = command
    AUTHOR = login


    if login in auth_data and auth_data[login] == password:
        builder = ReplyKeyboardBuilder()
        builder.row(types.KeyboardButton(text="üì± –ê–∫–∫–∞—É–Ω—Ç—ã"))
        builder.row(types.KeyboardButton(text="üé• –ö–æ–Ω—Ç–µ–Ω—Ç"))
        builder.row(types.KeyboardButton(text="üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"))
        builder.row(types.KeyboardButton(text="üìà –ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞"))
        builder.row(types.KeyboardButton(text="‚úÖ –ß–µ–∫–µ—Ä"))
        await message.answer(
            "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
            reply_markup=builder.as_markup(resize_keyboard=True),
        )

    else:
        await message.reply("–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å.")


@dp.message(Command("cr_acc"))
async def login_handler(message: types.Message):
    global AUTHOR
    t = message.text.strip().split()
    _, kol = t

    accounts.creating_account(author=AUTHOR, platform=0)

    await message.reply(f"kol - {kol}")



@dp.message(F)
async def under_menu(message: types.Message):
    flag = 0
    builder = ReplyKeyboardBuilder()
    if message.text == "–î–æ–±–∞–≤–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã":
        await message.reply("–í–≤–µ–¥–∏—Ç–µ /cr_acc –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ\n–ù–∞–ø—Ä–∏–º–µ—Ä /cr_acc 10")

    if message.text == "–í—ã–π—Ç–∏":
        flag = 1
        builder = ReplyKeyboardBuilder()
        builder.row(types.KeyboardButton(text="üì± –ê–∫–∫–∞—É–Ω—Ç—ã"))
        builder.row(types.KeyboardButton(text="üé• –ö–æ–Ω—Ç–µ–Ω—Ç"))
        builder.row(types.KeyboardButton(text="üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"))
        builder.row(types.KeyboardButton(text="üìà –ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞"))
        builder.row(types.KeyboardButton(text="‚úÖ –ß–µ–∫–µ—Ä"))
        builder.row(types.KeyboardButton(text="–í—ã–π—Ç–∏"))
    if message.text == "üì± –ê–∫–∫–∞—É–Ω—Ç—ã":
        flag = 1
        builder = ReplyKeyboardBuilder()
        builder.row(types.KeyboardButton(text="–î–æ–±–∞–≤–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç—ã"))
        builder.row(types.KeyboardButton(text="–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∞–∫–∫–∞—É–Ω—Ç"))
        builder.row(types.KeyboardButton(text="–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç"))
        builder.row(types.KeyboardButton(text="–ü–æ–¥–∫–ª—é—á–∏—Ç—å –±–∏–∑–Ω–µ—Å-–∞–∫–∫–∞—É–Ω—Ç"))
        builder.row(types.KeyboardButton(text="–í—ã–π—Ç–∏"))

    elif message.text == "üé• –ö–æ–Ω—Ç–µ–Ω—Ç":
        flag = 1
        builder = ReplyKeyboardBuilder()
        builder.row(types.KeyboardButton(text="–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–æ–ª–∏–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏"))
        builder.row(types.KeyboardButton(text="–£–Ω–∏–∫–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–æ–ª–∏–∫–∏"))
        builder.row(types.KeyboardButton(text="–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ª–∏–≤–∞"))
        builder.row(types.KeyboardButton(text="–í—ã–π—Ç–∏"))

    elif message.text == "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞":
        flag = 1
        builder = ReplyKeyboardBuilder()
        builder.row(types.KeyboardButton(text="–í—ã–±—Ä–∞—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞"))
        builder.row(types.KeyboardButton(text="–í—ã–±—Ä–∞—Ç—å –Ω–∏—à—É (–æ—Ñ—Ñ–µ—Ä—ã, –≤–µ—Ä—Ç–∏–∫–∞–ª–∏)"))
        builder.row(types.KeyboardButton(text="–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç—Ä–µ–Ω–¥—ã –∏ –ø—Ä–∏–º–µ—Ä—ã"))
        builder.row(types.KeyboardButton(text="–í—ã–π—Ç–∏"))

    elif message.text == "üìà –ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞":
        flag = 1
        builder = ReplyKeyboardBuilder()
        builder.row(types.KeyboardButton(text="–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç"))
        builder.row(types.KeyboardButton(text="–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ"))
        builder.row(types.KeyboardButton(text="–í—ã–π—Ç–∏"))

    elif message.text == "‚úÖ –ß–µ–∫–µ—Ä":
        flag = 1
        builder = ReplyKeyboardBuilder()
        builder.row(types.KeyboardButton(text="–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞–∫–∫–∞—É–Ω—Ç—É"))
        builder.row(types.KeyboardButton(text="–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"))
        builder.row(types.KeyboardButton(text="–í—ã–π—Ç–∏"))
    if flag == 1:
        await message.answer(
            "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
            reply_markup=builder.as_markup(resize_keyboard=True),
        )


async def main():
    await dp.start_polling(bot)

if __name__ == "__main__":
    asyncio.run(main())